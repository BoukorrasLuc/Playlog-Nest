// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL_LOCAL")
}

generator client {
  provider = "prisma-client-js"
}


model User {
  id          Int              @id @default(autoincrement())
  email       String           @unique
  nom         String?
  prenom      String?
  pseudo      String?
  password    String
  avatar      String?
  collections UserCollection[]
}

model ItemScrappeDatabase {
  id           String    @id @default(uuid())
  ean          String?
  title        String?
  systems      String?
  condition    String?
  completeness String?
  zone         String?
  priceSold    String?
  dateSold     DateTime?
}

model PriceData {
  id              String  @id
  asin            String?
  upc             String?
  productName     String?
  consoleName     String?
  genre           String?
  releaseDate     String?
  loosePrice      Int?
  cibPrice        Int?
  newPrice        Int?
  boxOnlyPrice    Int?
  manualOnlyPrice Int?
  gradedPrice     Int?
}

model System {
  id              String           @id
  asin            String?
  upc             String?
  productName     String?
  consoleName     String?
  genre           String?
  releaseDate     String?
  loosePrice      Int?
  cibPrice        Int?
  newPrice        Int?
  boxOnlyPrice    Int?
  manualOnlyPrice Int?
  gradedPrice     Int?
  collections     UserCollection[]
}

model Accessory {
  id              String           @id
  asin            String?
  upc             String?
  productName     String?
  consoleName     String?
  genre           String?
  releaseDate     String?
  loosePrice      Int?
  cibPrice        Int?
  newPrice        Int?
  boxOnlyPrice    Int?
  manualOnlyPrice Int?
  gradedPrice     Int?
  collections     UserCollection[]
}

model Game {
  id              String           @id
  asin            String?
  upc             String?
  productName     String?
  consoleName     String?
  genre           String?
  releaseDate     String?
  loosePrice      Int?
  cibPrice        Int?
  newPrice        Int?
  boxOnlyPrice    Int?
  manualOnlyPrice Int?
  gradedPrice     Int?
  collections     UserCollection[]
}

model UserCollection {
  id               Int        @id @default(autoincrement())
  userId           Int
  systemId         String?
  accessoryId      String?
  gameId           String?
  user             User       @relation(fields: [userId], references: [id])
  system           System?    @relation(fields: [systemId], references: [id])
  accessory        Accessory? @relation(fields: [accessoryId], references: [id])
  game             Game?      @relation(fields: [gameId], references: [id])
  acquisitionDate  DateTime?
  acquisitionPrice Float?
  condition        String?
  completeness     String?
  notes            String?

  @@unique([userId, systemId])
  @@unique([userId, accessoryId])
  @@unique([userId, gameId])
}
